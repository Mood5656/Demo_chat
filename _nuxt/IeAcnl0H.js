var It=Object.defineProperty;var Ge=t=>{throw TypeError(t)};var zt=(t,e,s)=>e in t?It(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var V=(t,e,s)=>zt(t,typeof e!="symbol"?e+"":e,s),Mt=(t,e,s)=>e.has(t)||Ge("Cannot "+s);var se=(t,e,s)=>(Mt(t,e,"read from private field"),s?s.call(t):e.get(t)),Xe=(t,e,s)=>e.has(t)?Ge("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s);import Ut from"./BI6zF25l.js";import{s as ve,i as Ft,e as be,g as lt,f as Be,h as R,j as g,r as jt,k as Vt,l as W,m as Y,n as ae,p as ct,q as Ht,v as Me,x as Kt,y as Wt,_ as z,z as Z,A as x,o as d,B as Oe,C as Ae,D as Jt,E as Yt,F as le,G as Gt,H as Xt,c as b,I as C,J as U,K as T,L as ut,M as E,t as L,N as G,O as D,P,w as X,a as _,Q as Qt,R as Qe,S as ht,T as Zt,d as Te,U as oe,V as Q,W as he,X as es,Y as ts,Z as ss,$ as dt,b as de,a0 as ns,a1 as is,a2 as ft,a3 as pt,a4 as rs,a5 as os,a6 as as}from"./DVFXSgWi.js";import{_ as gt}from"./DLPNXFKQ.js";function $e(t){return lt()?(Be(t),!0):!1}const Re=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Ze=()=>+Date.now();function ls(t,e=1e3,s={}){const{immediate:n=!0,immediateCallback:i=!1}=s;let r=null;const o=ve(!1);function a(){r&&(clearInterval(r),r=null)}function l(){o.value=!1,a()}function c(){const h=R(e);h<=0||(o.value=!0,i&&t(),a(),o.value&&(r=setInterval(t,h)))}if(n&&Re&&c(),Ft(e)||typeof e=="function"){const h=be(e,()=>{o.value&&Re&&c()});$e(h)}return $e(l),{isActive:o,pause:l,resume:c}}const cs=Re?window:void 0;function us(t,e={}){const{immediate:s=!0,fpsLimit:n=void 0,window:i=cs,once:r=!1}=e,o=ve(!1),a=g(()=>n?1e3/R(n):null);let l=0,c=null;function h(w){if(!o.value||!i)return;l||(l=w);const S=w-l;if(a.value&&S<a.value){c=i.requestAnimationFrame(h);return}if(l=w,t({delta:S,timestamp:w}),r){o.value=!1,c=null;return}c=i.requestAnimationFrame(h)}function u(){!o.value&&i&&(o.value=!0,l=0,c=i.requestAnimationFrame(h))}function f(){o.value=!1,c!=null&&i&&(i.cancelAnimationFrame(c),c=null)}return s&&u(),$e(f),{isActive:jt(o),pause:f,resume:u}}function hs(t={}){const{controls:e=!1,offset:s=0,immediate:n=!0,interval:i="requestAnimationFrame",callback:r}=t,o=ve(Ze()+s),a=()=>o.value=Ze()+s,l=r?()=>{a(),r(o.value)}:a,c=i==="requestAnimationFrame"?us(l,{immediate:n}):ls(l,i,{immediate:n});return e?{timestamp:o,...c}:o}const Ue={to:{type:[String,Object],default:void 0,required:!1},href:{type:[String,Object],default:void 0,required:!1},target:{type:String,default:void 0,required:!1},rel:{type:String,default:void 0,required:!1},noRel:{type:Boolean,default:void 0,required:!1},prefetch:{type:Boolean,default:void 0,required:!1},noPrefetch:{type:Boolean,default:void 0,required:!1},activeClass:{type:String,default:void 0,required:!1},exactActiveClass:{type:String,default:void 0,required:!1},prefetchedClass:{type:String,default:void 0,required:!1},replace:{type:Boolean,default:void 0,required:!1},ariaCurrentValue:{type:String,default:void 0,required:!1},external:{type:Boolean,default:void 0,required:!1}},ds=t=>Object.keys(Ue).reduce((s,n)=>(t[n]!==void 0&&(s[n]=t[n]),s),{}),fs=t=>t==="defer"||t===!1;function ps(...t){var y;const e=typeof t[t.length-1]=="string"?t.pop():void 0;typeof t[0]!="string"&&t.unshift(e);let[s,n,i={}]=t;if(typeof s!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof n!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const r=Vt(),o=n,a=()=>W.value,l=()=>r.isHydrating?r.payload.data[s]:r.static.data[s];i.server??(i.server=!0),i.default??(i.default=a),i.getCachedData??(i.getCachedData=l),i.lazy??(i.lazy=!1),i.immediate??(i.immediate=!0),i.deep??(i.deep=W.deep),i.dedupe??(i.dedupe="cancel");const c=i.getCachedData(s,r),h=c!=null;if(!r._asyncData[s]||!i.immediate){(y=r.payload._errors)[s]??(y[s]=W.errorValue);const v=i.deep?Y:ve;r._asyncData[s]={data:v(h?c:i.default()),pending:Y(!h),error:ae(r.payload._errors,s),status:Y("idle"),_default:i.default}}const u={...r._asyncData[s]};delete u._default,u.refresh=u.execute=(v={})=>{if(r._asyncDataPromises[s]){if(fs(v.dedupe??i.dedupe))return r._asyncDataPromises[s];r._asyncDataPromises[s].cancelled=!0}if(v._initial||r.isHydrating&&v._initial!==!1){const O=v._initial?c:i.getCachedData(s,r);if(O!=null)return Promise.resolve(O)}u.pending.value=!0,u.status.value="pending";const B=new Promise((O,m)=>{try{O(o(r))}catch(j){m(j)}}).then(async O=>{if(B.cancelled)return r._asyncDataPromises[s];let m=O;i.transform&&(m=await i.transform(O)),i.pick&&(m=ys(m,i.pick)),r.payload.data[s]=m,u.data.value=m,u.error.value=W.errorValue,u.status.value="success"}).catch(O=>{if(B.cancelled)return r._asyncDataPromises[s];u.error.value=Kt(O),u.data.value=Wt(i.default()),u.status.value="error"}).finally(()=>{B.cancelled||(u.pending.value=!1,delete r._asyncDataPromises[s])});return r._asyncDataPromises[s]=B,r._asyncDataPromises[s]},u.clear=()=>gs(r,s);const f=()=>u.refresh({_initial:!0}),w=i.server!==!1&&r.payload.serverRendered;{const v=ct();if(v&&w&&i.immediate&&!v.sp&&(v.sp=[]),v&&!v._nuxtOnBeforeMountCbs){v._nuxtOnBeforeMountCbs=[];const m=v._nuxtOnBeforeMountCbs;Ht(()=>{m.forEach(j=>{j()}),m.splice(0,m.length)}),Me(()=>m.splice(0,m.length))}w&&r.isHydrating&&(u.error.value||c!=null)?(u.pending.value=!1,u.status.value=u.error.value?"error":"success"):v&&(r.payload.serverRendered&&r.isHydrating||i.lazy)&&i.immediate?v._nuxtOnBeforeMountCbs.push(f):i.immediate&&f();const B=lt();if(i.watch){const m=be(i.watch,()=>u.refresh());B&&Be(m)}const O=r.hook("app:data:refresh",async m=>{(!m||m.includes(s))&&await u.refresh()});B&&Be(O)}const S=Promise.resolve(r._asyncDataPromises[s]).then(()=>u);return Object.assign(S,u),S}function gs(t,e){e in t.payload.data&&(t.payload.data[e]=void 0),e in t.payload._errors&&(t.payload._errors[e]=W.errorValue),t._asyncData[e]&&(t._asyncData[e].data.value=void 0,t._asyncData[e].error.value=W.errorValue,t._asyncData[e].pending.value=!1,t._asyncData[e].status.value="idle"),e in t._asyncDataPromises&&(t._asyncDataPromises[e]&&(t._asyncDataPromises[e].cancelled=!0),t._asyncDataPromises[e]=void 0)}function ys(t,e){const s={};for(const n of e)s[n]=t[n];return s}const ms=Z({props:{name:{type:String,required:!0},mode:{type:String,required:!1,default:null},size:{type:[Number,String],required:!1,default:null},customize:{type:Function,required:!1,default:null}}});function vs(t,e,s,n,i,r){const o=Ut;return d(),x(o,Oe(Ae(t.$props)),null,16)}const ee=z(ms,[["render",vs]]),we=(t,e,s,n,i=!1)=>{const r=Jt(),o=Yt(),a=g(()=>{var f;const c=R(e),h=R(s),u=R(n);return le((c==null?void 0:c.strategy)||((f=o.ui)==null?void 0:f.strategy),u?{wrapper:u}:{},c||{},i?Gt(o.ui,t,{}):{},h||{})}),l=g(()=>Xt(r,["class"]));return{ui:a,attrs:l}},bs={wrapper:"relative inline-flex items-center justify-center flex-shrink-0",background:"bg-gray-100 dark:bg-gray-800",rounded:"rounded-full",text:"font-medium leading-none text-gray-900 dark:text-white truncate",placeholder:"font-medium leading-none text-gray-500 dark:text-gray-400 truncate",size:{"3xs":"h-4 w-4 text-[8px]","2xs":"h-5 w-5 text-[10px]",xs:"h-6 w-6 text-xs",sm:"h-8 w-8 text-sm",md:"h-10 w-10 text-base",lg:"h-12 w-12 text-lg",xl:"h-14 w-14 text-xl","2xl":"h-16 w-16 text-2xl","3xl":"h-20 w-20 text-3xl"},chip:{base:"absolute rounded-full ring-1 ring-white dark:ring-gray-900 flex items-center justify-center text-white dark:text-gray-900 font-medium",background:"bg-{color}-500 dark:bg-{color}-400",position:{"top-right":"top-0 right-0","bottom-right":"bottom-0 right-0","top-left":"top-0 left-0","bottom-left":"bottom-0 left-0"},size:{"3xs":"h-[4px] min-w-[4px] text-[4px] p-px","2xs":"h-[5px] min-w-[5px] text-[5px] p-px",xs:"h-1.5 min-w-[0.375rem] text-[6px] p-px",sm:"h-2 min-w-[0.5rem] text-[7px] p-0.5",md:"h-2.5 min-w-[0.625rem] text-[8px] p-0.5",lg:"h-3 min-w-[0.75rem] text-[10px] p-0.5",xl:"h-3.5 min-w-[0.875rem] text-[11px] p-1","2xl":"h-4 min-w-[1rem] text-[12px] p-1","3xl":"h-5 min-w-[1.25rem] text-[14px] p-1"}},icon:{base:"text-gray-500 dark:text-gray-400 flex-shrink-0",size:{"3xs":"h-2 w-2","2xs":"h-2.5 w-2.5",xs:"h-3 w-3",sm:"h-4 w-4",md:"h-5 w-5",lg:"h-6 w-6",xl:"h-7 w-7","2xl":"h-8 w-8","3xl":"h-10 w-10"}},default:{size:"sm",icon:null,chipColor:null,chipPosition:"top-right"}},ws={base:"focus:outline-none focus-visible:outline-0 disabled:cursor-not-allowed disabled:opacity-75 aria-disabled:cursor-not-allowed aria-disabled:opacity-75 flex-shrink-0",font:"font-medium",rounded:"rounded-md",truncate:"text-left break-all line-clamp-1",block:"w-full flex justify-center items-center",inline:"inline-flex items-center",size:{"2xs":"text-xs",xs:"text-xs",sm:"text-sm",md:"text-sm",lg:"text-sm",xl:"text-base"},gap:{"2xs":"gap-x-1",xs:"gap-x-1.5",sm:"gap-x-1.5",md:"gap-x-2",lg:"gap-x-2.5",xl:"gap-x-2.5"},padding:{"2xs":"px-2 py-1",xs:"px-2.5 py-1.5",sm:"px-2.5 py-1.5",md:"px-3 py-2",lg:"px-3.5 py-2.5",xl:"px-3.5 py-2.5"},square:{"2xs":"p-1",xs:"p-1.5",sm:"p-1.5",md:"p-2",lg:"p-2.5",xl:"p-2.5"},color:{white:{solid:"shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-700 text-gray-900 dark:text-white bg-white hover:bg-gray-50 disabled:bg-white aria-disabled:bg-white dark:bg-gray-900 dark:hover:bg-gray-800/50 dark:disabled:bg-gray-900 dark:aria-disabled:bg-gray-900 focus-visible:ring-2 focus-visible:ring-primary-500 dark:focus-visible:ring-primary-400",ghost:"text-gray-900 dark:text-white hover:bg-white dark:hover:bg-gray-900 focus-visible:ring-inset focus-visible:ring-2 focus-visible:ring-primary-500 dark:focus-visible:ring-primary-400"},gray:{solid:"shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-700 text-gray-700 dark:text-gray-200 bg-gray-50 hover:bg-gray-100 disabled:bg-gray-50 aria-disabled:bg-gray-50 dark:bg-gray-800 dark:hover:bg-gray-700/50 dark:disabled:bg-gray-800 dark:aria-disabled:bg-gray-800 focus-visible:ring-2 focus-visible:ring-primary-500 dark:focus-visible:ring-primary-400",ghost:"text-gray-700 dark:text-gray-200 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-800 focus-visible:ring-inset focus-visible:ring-2 focus-visible:ring-primary-500 dark:focus-visible:ring-primary-400",link:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 underline-offset-4 hover:underline focus-visible:ring-inset focus-visible:ring-2 focus-visible:ring-primary-500 dark:focus-visible:ring-primary-400"},black:{solid:"shadow-sm text-white dark:text-gray-900 bg-gray-900 hover:bg-gray-800 disabled:bg-gray-900 aria-disabled:bg-gray-900 dark:bg-white dark:hover:bg-gray-100 dark:disabled:bg-white dark:aria-disabled:bg-white focus-visible:ring-inset focus-visible:ring-2 focus-visible:ring-primary-500 dark:focus-visible:ring-primary-400",link:"text-gray-900 dark:text-white underline-offset-4 hover:underline focus-visible:ring-inset focus-visible:ring-2 focus-visible:ring-primary-500 dark:focus-visible:ring-primary-400"}},variant:{solid:"shadow-sm text-white dark:text-gray-900 bg-{color}-500 hover:bg-{color}-600 disabled:bg-{color}-500 aria-disabled:bg-{color}-500 dark:bg-{color}-400 dark:hover:bg-{color}-500 dark:disabled:bg-{color}-400 dark:aria-disabled:bg-{color}-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-{color}-500 dark:focus-visible:outline-{color}-400",outline:"ring-1 ring-inset ring-current text-{color}-500 dark:text-{color}-400 hover:bg-{color}-50 disabled:bg-transparent aria-disabled:bg-transparent dark:hover:bg-{color}-950 dark:disabled:bg-transparent dark:aria-disabled:bg-transparent focus-visible:ring-2 focus-visible:ring-{color}-500 dark:focus-visible:ring-{color}-400",soft:"text-{color}-500 dark:text-{color}-400 bg-{color}-50 hover:bg-{color}-100 disabled:bg-{color}-50 aria-disabled:bg-{color}-50 dark:bg-{color}-950 dark:hover:bg-{color}-900 dark:disabled:bg-{color}-950 dark:aria-disabled:bg-{color}-950 focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-{color}-500 dark:focus-visible:ring-{color}-400",ghost:"text-{color}-500 dark:text-{color}-400 hover:bg-{color}-50 disabled:bg-transparent aria-disabled:bg-transparent dark:hover:bg-{color}-950 dark:disabled:bg-transparent dark:aria-disabled:bg-transparent focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-{color}-500 dark:focus-visible:ring-{color}-400",link:"text-{color}-500 hover:text-{color}-600 disabled:text-{color}-500 aria-disabled:text-{color}-500 dark:text-{color}-400 dark:hover:text-{color}-500 dark:disabled:text-{color}-400 dark:aria-disabled:text-{color}-400 underline-offset-4 hover:underline focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-{color}-500 dark:focus-visible:ring-{color}-400"},icon:{base:"flex-shrink-0",loading:"animate-spin",size:{"2xs":"h-4 w-4",xs:"h-4 w-4",sm:"h-5 w-5",md:"h-5 w-5",lg:"h-5 w-5",xl:"h-6 w-6"}},default:{size:"sm",variant:"solid",color:"primary",loadingIcon:"i-heroicons-arrow-path-20-solid"}},_s={option:{base:"cursor-default select-none relative flex items-center justify-between gap-1",rounded:"rounded-md",padding:"px-1.5 py-1.5",size:"text-sm",color:"text-gray-900 dark:text-white",container:"flex items-center gap-1.5 min-w-0",active:"bg-gray-100 dark:bg-gray-900",inactive:"",selected:"pe-7",disabled:"cursor-not-allowed opacity-50",empty:"text-sm text-gray-400 dark:text-gray-500 px-2 py-1.5",icon:{base:"flex-shrink-0 h-5 w-5",active:"text-gray-900 dark:text-white",inactive:"text-gray-400 dark:text-gray-500"},selectedIcon:{wrapper:"absolute inset-y-0 end-0 flex items-center",padding:"pe-2",base:"h-5 w-5 text-gray-900 dark:text-white flex-shrink-0"},avatar:{base:"flex-shrink-0",size:"2xs"},chip:{base:"flex-shrink-0 w-2 h-2 mx-1 rounded-full"}}};({..._s.option});const ks={wrapper:"w-full pointer-events-auto",container:"relative overflow-hidden",inner:"w-0 flex-1",title:"text-sm font-medium text-gray-900 dark:text-white",description:"mt-1 text-sm leading-4 text-gray-500 dark:text-gray-400",descriptionOnly:"mt-0 leading-5",actions:"flex items-center gap-2 mt-3 flex-shrink-0",background:"bg-white dark:bg-gray-900",shadow:"shadow-lg",rounded:"rounded-lg",padding:"p-4",gap:"gap-3",ring:"ring-1 ring-gray-200 dark:ring-gray-800",icon:{base:"flex-shrink-0 w-5 h-5",color:"text-{color}-500 dark:text-{color}-400"},avatar:{base:"flex-shrink-0 self-center",size:"md"},progress:{base:"absolute bottom-0 end-0 start-0 h-1",background:"bg-{color}-500 dark:bg-{color}-400"},transition:{enterActiveClass:"transform ease-out duration-300 transition",enterFromClass:"translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-2",enterToClass:"translate-y-0 opacity-100 sm:translate-x-0",leaveActiveClass:"transition ease-in duration-100",leaveFromClass:"opacity-100",leaveToClass:"opacity-0"},default:{color:"primary",icon:null,timeout:5e3,closeButton:{icon:"i-heroicons-x-mark-20-solid",color:"gray",variant:"link",padded:!1},actionButton:{size:"xs",color:"white"}}},Cs={wrapper:"fixed flex flex-col justify-end z-[55]",position:"bottom-0 end-0",width:"w-full sm:w-96",container:"px-4 sm:px-6 py-6 space-y-3 overflow-y-auto"},H=le(P.ui.strategy,P.ui.avatar,bs),Ss=Z({components:{UIcon:ee},inheritAttrs:!1,props:{as:{type:[String,Object],default:"img"},src:{type:[String,Boolean],default:null},alt:{type:String,default:null},text:{type:String,default:null},icon:{type:String,default:()=>H.default.icon},size:{type:String,default:()=>H.default.size,validator(t){return Object.keys(H.size).includes(t)}},chipColor:{type:String,default:()=>H.default.chipColor,validator(t){return["gray",...P.ui.colors].includes(t)}},chipPosition:{type:String,default:()=>H.default.chipPosition,validator(t){return Object.keys(H.chip.position).includes(t)}},chipText:{type:[String,Number],default:null},imgClass:{type:String,default:""},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(t){const{ui:e,attrs:s}=we("avatar",ae(t,"ui"),H),n=g(()=>typeof t.src=="boolean"?null:t.src),i=g(()=>(t.alt||"").split(" ").map(u=>u.charAt(0)).join("").substring(0,2)),r=g(()=>G(D(e.value.wrapper,(c.value||!n.value)&&e.value.background,e.value.rounded,e.value.size[t.size]),t.class)),o=g(()=>G(D(e.value.rounded,e.value.size[t.size]),t.imgClass)),a=g(()=>D(e.value.icon.base,e.value.icon.size[t.size])),l=g(()=>D(e.value.chip.base,e.value.chip.size[t.size],e.value.chip.position[t.chipPosition],e.value.chip.background.replaceAll("{color}",t.chipColor))),c=Y(!1);be(()=>t.src,()=>{c.value&&(c.value=!1)});function h(){c.value=!0}return{ui:e,attrs:s,wrapperClass:r,imgClass:o,iconClass:a,chipClass:l,url:n,placeholder:i,error:c,onError:h}}});function Es(t,e,s,n,i,r){const o=ee;return d(),b("span",{class:E(t.wrapperClass)},[t.url&&!t.error?(d(),x(ut(t.as),T({key:0,class:t.imgClass,alt:t.alt,src:t.url},t.attrs,{onError:t.onError}),null,16,["class","alt","src","onError"])):t.text?(d(),b("span",{key:1,class:E(t.ui.text)},L(t.text),3)):t.icon?(d(),x(o,{key:2,name:t.icon,class:E(t.iconClass)},null,8,["name","class"])):t.placeholder?(d(),b("span",{key:3,class:E(t.ui.placeholder)},L(t.placeholder),3)):C("",!0),t.chipColor?(d(),b("span",{key:4,class:E(t.chipClass)},L(t.chipText),3)):C("",!0),U(t.$slots,"default")],2)}const yt=z(Ss,[["render",Es]]);function me(t){return typeof t=="string"?`'${t}'`:new xs().serialize(t)}const xs=function(){var e;class t{constructor(){Xe(this,e,new Map)}compare(n,i){const r=typeof n,o=typeof i;return r==="string"&&o==="string"?n.localeCompare(i):r==="number"&&o==="number"?n-i:String.prototype.localeCompare.call(this.serialize(n,!0),this.serialize(i,!0))}serialize(n,i){if(n===null)return"null";switch(typeof n){case"string":return i?n:`'${n}'`;case"bigint":return`${n}n`;case"object":return this.$object(n);case"function":return this.$function(n)}return String(n)}serializeObject(n){const i=Object.prototype.toString.call(n);if(i!=="[object Object]")return this.serializeBuiltInType(i.length<10?`unknown:${i}`:i.slice(8,-1),n);const r=n.constructor,o=r===Object||r===void 0?"":r.name;if(o!==""&&globalThis[o]===r)return this.serializeBuiltInType(o,n);if(typeof n.toJSON=="function"){const a=n.toJSON();return o+(a!==null&&typeof a=="object"?this.$object(a):`(${this.serialize(a)})`)}return this.serializeObjectEntries(o,Object.entries(n))}serializeBuiltInType(n,i){const r=this["$"+n];if(r)return r.call(this,i);if(typeof(i==null?void 0:i.entries)=="function")return this.serializeObjectEntries(n,i.entries());throw new Error(`Cannot serialize ${n}`)}serializeObjectEntries(n,i){const r=Array.from(i).sort((a,l)=>this.compare(a[0],l[0]));let o=`${n}{`;for(let a=0;a<r.length;a++){const[l,c]=r[a];o+=`${this.serialize(l,!0)}:${this.serialize(c)}`,a<r.length-1&&(o+=",")}return o+"}"}$object(n){let i=se(this,e).get(n);return i===void 0&&(se(this,e).set(n,`#${se(this,e).size}`),i=this.serializeObject(n),se(this,e).set(n,i)),i}$function(n){const i=Function.prototype.toString.call(n);return i.slice(-15)==="[native code] }"?`${n.name||""}()[native]`:`${n.name}(${n.length})${i.replace(/\s*\n\s*/g,"")}`}$Array(n){let i="[";for(let r=0;r<n.length;r++)i+=this.serialize(n[r]),r<n.length-1&&(i+=",");return i+"]"}$Date(n){try{return`Date(${n.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(n){return`ArrayBuffer[${new Uint8Array(n).join(",")}]`}$Set(n){return`Set${this.$Array(Array.from(n).sort((i,r)=>this.compare(i,r)))}`}$Map(n){return this.serializeObjectEntries("Map",n.entries())}}e=new WeakMap;for(const s of["Error","RegExp","URL"])t.prototype["$"+s]=function(n){return`${s}(${n})`};for(const s of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])t.prototype["$"+s]=function(n){return`${s}[${n.join(",")}]`};for(const s of["BigInt64Array","BigUint64Array"])t.prototype["$"+s]=function(n){return`${s}[${n.join("n,")}${n.length>0?"n":""}]`};return t}();function et(t,e){return t===e||me(t)===me(e)}function Bs(t,e){const s=Ne(t),n=Ne(e);return mt(s,n)}function mt(t,e){var i,r;const s=[],n=new Set([...Object.keys(t.props||{}),...Object.keys(e.props||{})]);if(t.props&&e.props)for(const o of n){const a=t.props[o],l=e.props[o];a&&l?s.push(...mt((i=t.props)==null?void 0:i[o],(r=e.props)==null?void 0:r[o])):(a||l)&&s.push(new tt((l||a).key,a?"removed":"added",l,a))}return n.size===0&&t.hash!==e.hash&&s.push(new tt((e||t).key,"changed",e,t)),s}function Ne(t,e=""){if(t&&typeof t!="object")return new st(e,t,me(t));const s={},n=[];for(const i in t)s[i]=Ne(t[i],e?`${e}.${i}`:i),n.push(s[i].hash);return new st(e,t,`{${n.join(":")}}`,s)}class tt{constructor(e,s,n,i){this.key=e,this.type=s,this.newValue=n,this.oldValue=i}toString(){return this.toJSON()}toJSON(){var e;switch(this.type){case"added":return`Added   \`${this.key}\``;case"removed":return`Removed \`${this.key}\``;case"changed":return`Changed \`${this.key}\` from \`${((e=this.oldValue)==null?void 0:e.toString())||"-"}\` to \`${this.newValue.toString()}\``}}}class st{constructor(e,s,n,i){this.key=e,this.value=s,this.hash=n,this.props=i}toString(){return this.props?`{${Object.keys(this.props).join(",")}}`:JSON.stringify(this.value)}toJSON(){const e=this.key||".";return this.props?`${e}({${Object.keys(this.props).join(",")}})`:`${e}(${this.value})`}}const Os=Z({inheritAttrs:!1,props:{...Ue,as:{type:String,default:"button"},type:{type:String,default:"button"},disabled:{type:Boolean,default:null},active:{type:Boolean,default:void 0},exact:{type:Boolean,default:!1},exactQuery:{type:[Boolean,String],default:!1},exactHash:{type:Boolean,default:!1},inactiveClass:{type:String,default:void 0}},setup(t){function e(n,i){const r=Bs(n,i).reduce((l,c)=>(c.type==="added"&&l.add(c.key),l),new Set),o=Object.fromEntries(Object.entries(n).filter(([l])=>!r.has(l))),a=Object.fromEntries(Object.entries(i).filter(([l])=>!r.has(l)));return et(o,a)}function s(n,i,{isActive:r,isExactActive:o}){if(t.exactQuery==="partial"){if(!e(n.query,i.query))return t.inactiveClass}else if(t.exactQuery===!0&&!et(n.query,i.query))return t.inactiveClass;return t.exactHash&&n.hash!==i.hash?t.inactiveClass:t.exact&&o||!t.exact&&r?t.activeClass:t.inactiveClass}return{resolveLinkClass:s}}}),As=["href","aria-disabled","role","rel","target","tabindex","onClick"];function Ts(t,e,s,n,i,r){const o=gt;return t.to?(d(),x(o,T({key:1},t.$props,{custom:""}),{default:X(({route:a,href:l,target:c,rel:h,navigate:u,isActive:f,isExactActive:w,isExternal:S})=>[_("a",T(t.$attrs,{href:t.disabled?void 0:l,"aria-disabled":t.disabled?"true":void 0,role:t.disabled?"link":void 0,rel:h,target:c,class:t.active!==void 0?t.active?t.activeClass:t.inactiveClass:t.resolveLinkClass(a,t._.provides[Qt]||t.$route,{isActive:f,isExactActive:w}),tabindex:t.disabled?-1:void 0,onClick:y=>!S&&!t.disabled&&u(y)}),[U(t.$slots,"default",Oe(Ae({isActive:t.active!==void 0?t.active:t.exact?w:f})))],16,As)]),_:3},16)):(d(),x(ut(t.as),T({key:0,type:t.type,disabled:t.disabled},t.$attrs,{class:t.active?t.activeClass:t.inactiveClass}),{default:X(()=>[U(t.$slots,"default",Oe(Ae({isActive:t.active})))]),_:3},16,["type","disabled","class"]))}const vt=z(Os,[["render",Ts]]);function $s({ui:t,props:e}){const s=ct();if(Zt("ButtonGroupContextConsumer",!0),Qe("ButtonGroupContextConsumer",!1))return{size:g(()=>e.size),rounded:g(()=>t.value.rounded)};let i=s.parent,r;for(;i&&!r;){if(i.type.name==="ButtonGroup"){r=Qe(`group-${i.uid}`);break}i=i.parent}const o=g(()=>r==null?void 0:r.value.children.indexOf(s));return ht(()=>{r==null||r.value.register(s)}),Me(()=>{r==null||r.value.unregister(s)}),{size:g(()=>r!=null&&r.value?(r==null?void 0:r.value.size)??t.value.default.size:e.size),rounded:g(()=>!r||o.value===-1?t.value.rounded:r.value.children.length===1?r.value.ui.rounded:o.value===0?r.value.rounded.start:o.value===r.value.children.length-1?r.value.rounded.end:"rounded-none")}}const M=le(P.ui.strategy,P.ui.button,ws),Rs=Z({components:{UIcon:ee,ULink:vt},inheritAttrs:!1,props:{...Ue,type:{type:String,default:"button"},block:{type:Boolean,default:!1},label:{type:String,default:null},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},size:{type:String,default:()=>M.default.size,validator(t){return Object.keys(M.size).includes(t)}},color:{type:String,default:()=>M.default.color,validator(t){return[...P.ui.colors,...Object.keys(M.color)].includes(t)}},variant:{type:String,default:()=>M.default.variant,validator(t){return[...Object.keys(M.variant),...Object.values(M.color).flatMap(e=>Object.keys(e))].includes(t)}},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>M.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:null},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},square:{type:Boolean,default:!1},truncate:{type:Boolean,default:!1},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(t,{slots:e}){const{ui:s,attrs:n}=we("button",ae(t,"ui"),M),{size:i,rounded:r}=$s({ui:s,props:t}),o=g(()=>t.icon&&t.leading||t.icon&&!t.trailing||t.loading&&!t.trailing||t.leadingIcon),a=g(()=>t.icon&&t.trailing||t.loading&&t.trailing||t.trailingIcon),l=g(()=>t.square||!e.default&&!t.label),c=g(()=>{var v,B;const y=((B=(v=s.value.color)==null?void 0:v[t.color])==null?void 0:B[t.variant])||s.value.variant[t.variant];return G(D(s.value.base,s.value.font,r.value,s.value.size[i.value],s.value.gap[i.value],t.padded&&s.value[l.value?"square":"padding"][i.value],y==null?void 0:y.replaceAll("{color}",t.color),t.block?s.value.block:s.value.inline),t.class)}),h=g(()=>t.loading?t.loadingIcon:t.leadingIcon||t.icon),u=g(()=>t.loading&&!o.value?t.loadingIcon:t.trailingIcon||t.icon),f=g(()=>D(s.value.icon.base,s.value.icon.size[i.value],t.loading&&s.value.icon.loading)),w=g(()=>D(s.value.icon.base,s.value.icon.size[i.value],t.loading&&!o.value&&s.value.icon.loading)),S=g(()=>ds(t));return{ui:s,attrs:n,isLeading:o,isTrailing:a,isSquare:l,buttonClass:c,leadingIconName:h,trailingIconName:u,leadingIconClass:f,trailingIconClass:w,linkProps:S}}});function Ns(t,e,s,n,i,r){const o=ee,a=vt;return d(),x(a,T({type:t.type,disabled:t.disabled||t.loading,class:t.buttonClass},{...t.linkProps,...t.attrs}),{default:X(()=>[U(t.$slots,"leading",{disabled:t.disabled,loading:t.loading},()=>[t.isLeading&&t.leadingIconName?(d(),x(o,{key:0,name:t.leadingIconName,class:E(t.leadingIconClass),"aria-hidden":"true"},null,8,["name","class"])):C("",!0)]),U(t.$slots,"default",{},()=>[t.label?(d(),b("span",{key:0,class:E([t.truncate?t.ui.truncate:""])},L(t.label),3)):C("",!0)]),U(t.$slots,"trailing",{disabled:t.disabled,loading:t.loading},()=>[t.isTrailing&&t.trailingIconName?(d(),x(o,{key:0,name:t.trailingIconName,class:E(t.trailingIconClass),"aria-hidden":"true"},null,8,["name","class"])):C("",!0)])]),_:3},16,["type","disabled","class"])}const bt=z(Rs,[["render",Ns]]);function Ds(t,e,s){let n=null;const{pause:i,resume:r,timestamp:o}=hs({controls:!0}),a=Y(null),l=g(()=>a.value?e-(o.value-a.value):0);function c(...y){n=setTimeout(()=>{n=null,a.value=null,t(...y)},l.value)}function h(){n&&(clearTimeout(n),n=null)}function u(){a.value=Date.now(),c()}function f(){h(),i()}function w(){h(),i()}function S(){c(),r(),a.value=(a.value||0)+(Date.now()-o.value)}return u(),{start:u,stop:f,pause:w,resume:S,remaining:l}}const ne=le(P.ui.strategy,P.ui.notification,ks),Ps=Z({components:{UIcon:ee,UAvatar:yt,UButton:bt},inheritAttrs:!1,props:{id:{type:[String,Number],required:!0},title:{type:String,default:null},description:{type:String,default:null},icon:{type:String,default:()=>ne.default.icon},avatar:{type:Object,default:null},closeButton:{type:Object,default:()=>ne.default.closeButton},timeout:{type:Number,default:()=>ne.default.timeout},actions:{type:Array,default:()=>[]},callback:{type:Function,default:null},color:{type:String,default:()=>ne.default.color,validator(t){return["gray",...P.ui.colors].includes(t)}},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},pauseTimeoutOnHover:{type:Boolean,default:!0}},emits:["close"],setup(t,{emit:e}){const{ui:s,attrs:n}=we("notification",ae(t,"ui"),ne);let i=null;const r=Y(t.timeout),o=g(()=>{var y,v;return G(D(s.value.wrapper,(y=s.value.background)==null?void 0:y.replaceAll("{color}",t.color),s.value.rounded,s.value.shadow,(v=s.value.ring)==null?void 0:v.replaceAll("{color}",t.color)),t.class)}),a=g(()=>{var y;return D(s.value.progress.base,(y=s.value.progress.background)==null?void 0:y.replaceAll("{color}",t.color))}),l=g(()=>({width:`${r.value/t.timeout*100||0}%`})),c=g(()=>{var y;return D(s.value.icon.base,(y=s.value.icon.color)==null?void 0:y.replaceAll("{color}",t.color))});function h(){t.pauseTimeoutOnHover&&i&&i.pause()}function u(){t.pauseTimeoutOnHover&&i&&i.resume()}function f(){i&&i.stop(),t.callback&&t.callback(),e("close")}function w(y){i&&i.stop(),y.click&&y.click(),e("close")}function S(){i&&i.stop(),t.timeout&&(i=Ds(()=>{f()},t.timeout),ss(()=>{r.value=i.remaining.value}))}return be(()=>t.timeout,S),ht(S),Me(()=>{i&&i.stop()}),{ui:s,attrs:n,wrapperClass:o,progressClass:a,progressStyle:l,iconClass:c,onMouseover:h,onMouseleave:u,onClose:f,onAction:w,twMerge:G}}});function Ls(t,e,s,n,i,r){const o=ee,a=yt,l=bt;return d(),x(ts,T({appear:""},t.ui.transition),{default:X(()=>[_("div",T({class:t.wrapperClass,role:"status"},t.attrs,{onMouseover:e[0]||(e[0]=(...c)=>t.onMouseover&&t.onMouseover(...c)),onMouseleave:e[1]||(e[1]=(...c)=>t.onMouseleave&&t.onMouseleave(...c))}),[_("div",{class:E([t.ui.container,t.ui.rounded,t.ui.ring])},[_("div",{class:E(["flex",[t.ui.padding,t.ui.gap,{"items-start":t.description||t.$slots.description,"items-center":!t.description&&!t.$slots.description}]])},[t.icon?(d(),x(o,{key:0,name:t.icon,class:E(t.iconClass)},null,8,["name","class"])):C("",!0),t.avatar?(d(),x(a,T({key:1},{size:t.ui.avatar.size,...t.avatar},{class:t.ui.avatar.base}),null,16,["class"])):C("",!0),_("div",{class:E(t.ui.inner)},[t.title||t.$slots.title?(d(),b("p",{key:0,class:E(t.ui.title)},[U(t.$slots,"title",{title:t.title},()=>[Te(L(t.title),1)])],2)):C("",!0),t.description||t.$slots.description?(d(),b("div",{key:1,class:E(t.twMerge(t.ui.description,!t.title&&!t.$slots.title&&t.ui.descriptionOnly))},[U(t.$slots,"description",{description:t.description},()=>[Te(L(t.description),1)])],2)):C("",!0),(t.description||t.$slots.description)&&t.actions.length?(d(),b("div",{key:2,class:E(t.ui.actions)},[(d(!0),b(oe,null,Q(t.actions,(c,h)=>(d(),x(l,T({key:h,ref_for:!0},{...t.ui.default.actionButton||{},...c},{onClick:he(u=>t.onAction(c),["stop"])}),null,16,["onClick"]))),128))],2)):C("",!0)],2),t.closeButton||!t.description&&!t.$slots.description&&t.actions.length?(d(),b("div",{key:2,class:E(t.twMerge(t.ui.actions,"mt-0"))},[!t.description&&!t.$slots.description&&t.actions.length?(d(!0),b(oe,{key:0},Q(t.actions,(c,h)=>(d(),x(l,T({key:h,ref_for:!0},{...t.ui.default.actionButton||{},...c},{onClick:he(u=>t.onAction(c),["stop"])}),null,16,["onClick"]))),128)):C("",!0),t.closeButton?(d(),x(l,T({key:1,"aria-label":"Close"},{...t.ui.default.closeButton||{},...t.closeButton},{onClick:he(t.onClose,["stop"])}),null,16,["onClick"])):C("",!0)],2)):C("",!0)],2),t.timeout?(d(),b("div",{key:0,class:E(t.progressClass),style:es(t.progressStyle)},null,6)):C("",!0)],2)],16)]),_:3},16)}const wt=z(Ps,[["render",Ls]]);function _t(){const t=dt("notifications",()=>[]);function e(r){const o={id:new Date().getTime().toString(),...r};return t.value.findIndex(l=>l.id===o.id)===-1&&t.value.push(o),o}function s(r){t.value=t.value.filter(o=>o.id!==r)}function n(r,o){const a=t.value.findIndex(l=>l.id===r);if(a!==-1){const l=t.value[a];t.value.splice(a,1,{...l,...o})}}function i(){t.value=[]}return{add:e,remove:s,update:n,clear:i}}const qs=le(P.ui.strategy,P.ui.notifications,Cs),Is=Z({components:{UNotification:wt},inheritAttrs:!1,props:{class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(t){const{ui:e,attrs:s}=we("notifications",ae(t,"ui"),qs),n=_t(),i=dt("notifications",()=>[]),r=g(()=>G(D(e.value.wrapper,e.value.position,e.value.width),t.class));return{ui:e,attrs:s,toast:n,notifications:i,wrapperClass:r}}});function zs(t,e,s,n,i,r){const o=wt;return d(),x(is,{to:"body"},[t.notifications.length?(d(),b("div",T({key:0,class:t.wrapperClass,role:"region"},t.attrs),[_("div",{class:E(t.ui.container)},[(d(!0),b(oe,null,Q(t.notifications,a=>(d(),b("div",{key:a.id},[de(o,T({ref_for:!0},a,{class:a.click&&"cursor-pointer",onClick:l=>a.click&&a.click(a),onClose:l=>t.toast.remove(a.id)}),ns({_:2},[Q(t.$slots,(l,c)=>({name:c,fn:X(h=>[U(t.$slots,c,T({ref_for:!0},h))])}))]),1040,["class","onClick","onClose"])]))),128))],2)],16)):C("",!0)])}const Ms=z(Is,[["render",zs]]),Us={name:"Sidebar"},Fs={class:"sidebar"};function js(t,e,s,n,i,r){return d(),b("div",Fs,e[0]||(e[0]=[_("h2",null,"ShishGram",-1),_("ul",null,[_("li",null,"Chats"),_("li",null,"Contacts"),_("li",null,"Settings")],-1)]))}const kt=z(Us,[["render",js],["__scopeId","data-v-b98227c3"]]),Vs={name:"ChatList",props:{chats:Array},methods:{selectChat(t){this.$emit("chat-selected",t)}}},Hs={class:"chat-list"},Ks=["onClick"];function Ws(t,e,s,n,i,r){return d(),b("div",Hs,[e[0]||(e[0]=_("h3",null,"Chats",-1)),_("ul",null,[(d(!0),b(oe,null,Q(s.chats,o=>(d(),b("li",{key:o.id,onClick:a=>r.selectChat(o)},L(o.name),9,Ks))),128))])])}const Ct=z(Vs,[["render",Ws],["__scopeId","data-v-fec1035c"]]),Js={name:"ChatWindow",props:{chat:Object},data(){return{newMessage:""}},methods:{sendMessage(){this.newMessage.trim()!==""&&(this.$emit("sendMessage",{text:this.newMessage}),this.chat.messages.push({id:Date.now(),sender:"You",text:this.newMessage}),this.newMessage="")}}},Ys={class:"chat-window"},Gs={class:"messages"};function Xs(t,e,s,n,i,r){return d(),b("div",Ys,[_("h3",null,L(s.chat.name),1),_("div",Gs,[(d(!0),b(oe,null,Q(s.chat.messages,o=>(d(),b("div",{key:o.id},[_("strong",null,L(o.sender)+":",1),Te(" "+L(o.text),1)]))),128))]),ft(_("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>i.newMessage=o),onKeyup:e[1]||(e[1]=rs((...o)=>r.sendMessage&&r.sendMessage(...o),["enter"])),placeholder:"Type a message..."},null,544),[[pt,i.newMessage]])])}const St=z(Js,[["render",Xs],["__scopeId","data-v-2104abb8"]]),I=Object.create(null);I.open="0";I.close="1";I.ping="2";I.pong="3";I.message="4";I.upgrade="5";I.noop="6";const fe=Object.create(null);Object.keys(I).forEach(t=>{fe[I[t]]=t});const De={type:"error",data:"parser error"},Et=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",xt=typeof ArrayBuffer=="function",Bt=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Fe=({type:t,data:e},s,n)=>Et&&e instanceof Blob?s?n(e):nt(e,n):xt&&(e instanceof ArrayBuffer||Bt(e))?s?n(e):nt(new Blob([e]),n):n(I[t]+(e||"")),nt=(t,e)=>{const s=new FileReader;return s.onload=function(){const n=s.result.split(",")[1];e("b"+(n||""))},s.readAsDataURL(t)};function it(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let Se;function Qs(t,e){if(Et&&t.data instanceof Blob)return t.data.arrayBuffer().then(it).then(e);if(xt&&(t.data instanceof ArrayBuffer||Bt(t.data)))return e(it(t.data));Fe(t,!1,s=>{Se||(Se=new TextEncoder),e(Se.encode(s))})}const rt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",re=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<rt.length;t++)re[rt.charCodeAt(t)]=t;const Zs=t=>{let e=t.length*.75,s=t.length,n,i=0,r,o,a,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const c=new ArrayBuffer(e),h=new Uint8Array(c);for(n=0;n<s;n+=4)r=re[t.charCodeAt(n)],o=re[t.charCodeAt(n+1)],a=re[t.charCodeAt(n+2)],l=re[t.charCodeAt(n+3)],h[i++]=r<<2|o>>4,h[i++]=(o&15)<<4|a>>2,h[i++]=(a&3)<<6|l&63;return c},en=typeof ArrayBuffer=="function",je=(t,e)=>{if(typeof t!="string")return{type:"message",data:Ot(t,e)};const s=t.charAt(0);return s==="b"?{type:"message",data:tn(t.substring(1),e)}:fe[s]?t.length>1?{type:fe[s],data:t.substring(1)}:{type:fe[s]}:De},tn=(t,e)=>{if(en){const s=Zs(t);return Ot(s,e)}else return{base64:!0,data:t}},Ot=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},At="",sn=(t,e)=>{const s=t.length,n=new Array(s);let i=0;t.forEach((r,o)=>{Fe(r,!1,a=>{n[o]=a,++i===s&&e(n.join(At))})})},nn=(t,e)=>{const s=t.split(At),n=[];for(let i=0;i<s.length;i++){const r=je(s[i],e);if(n.push(r),r.type==="error")break}return n};function rn(){return new TransformStream({transform(t,e){Qs(t,s=>{const n=s.length;let i;if(n<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,n);else if(n<65536){i=new Uint8Array(3);const r=new DataView(i.buffer);r.setUint8(0,126),r.setUint16(1,n)}else{i=new Uint8Array(9);const r=new DataView(i.buffer);r.setUint8(0,127),r.setBigUint64(1,BigInt(n))}t.data&&typeof t.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(s)})}})}let Ee;function ce(t){return t.reduce((e,s)=>e+s.length,0)}function ue(t,e){if(t[0].length===e)return t.shift();const s=new Uint8Array(e);let n=0;for(let i=0;i<e;i++)s[i]=t[0][n++],n===t[0].length&&(t.shift(),n=0);return t.length&&n<t[0].length&&(t[0]=t[0].slice(n)),s}function on(t,e){Ee||(Ee=new TextDecoder);const s=[];let n=0,i=-1,r=!1;return new TransformStream({transform(o,a){for(s.push(o);;){if(n===0){if(ce(s)<1)break;const l=ue(s,1);r=(l[0]&128)===128,i=l[0]&127,i<126?n=3:i===126?n=1:n=2}else if(n===1){if(ce(s)<2)break;const l=ue(s,2);i=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),n=3}else if(n===2){if(ce(s)<8)break;const l=ue(s,8),c=new DataView(l.buffer,l.byteOffset,l.length),h=c.getUint32(0);if(h>Math.pow(2,21)-1){a.enqueue(De);break}i=h*Math.pow(2,32)+c.getUint32(4),n=3}else{if(ce(s)<i)break;const l=ue(s,i);a.enqueue(je(r?l:Ee.decode(l),e)),n=0}if(i===0||i>t){a.enqueue(De);break}}}})}const Tt=4;function k(t){if(t)return an(t)}function an(t){for(var e in k.prototype)t[e]=k.prototype[e];return t}k.prototype.on=k.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};k.prototype.once=function(t,e){function s(){this.off(t,s),e.apply(this,arguments)}return s.fn=e,this.on(t,s),this};k.prototype.off=k.prototype.removeListener=k.prototype.removeAllListeners=k.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+t];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var n,i=0;i<s.length;i++)if(n=s[i],n===e||n.fn===e){s.splice(i,1);break}return s.length===0&&delete this._callbacks["$"+t],this};k.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),s=this._callbacks["$"+t],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(s){s=s.slice(0);for(var n=0,i=s.length;n<i;++n)s[n].apply(this,e)}return this};k.prototype.emitReserved=k.prototype.emit;k.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};k.prototype.hasListeners=function(t){return!!this.listeners(t).length};const _e=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,s)=>s(e,0),$=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),ln="arraybuffer";function $t(t,...e){return e.reduce((s,n)=>(t.hasOwnProperty(n)&&(s[n]=t[n]),s),{})}const cn=$.setTimeout,un=$.clearTimeout;function ke(t,e){e.useNativeTimers?(t.setTimeoutFn=cn.bind($),t.clearTimeoutFn=un.bind($)):(t.setTimeoutFn=$.setTimeout.bind($),t.clearTimeoutFn=$.clearTimeout.bind($))}const hn=1.33;function dn(t){return typeof t=="string"?fn(t):Math.ceil((t.byteLength||t.size)*hn)}function fn(t){let e=0,s=0;for(let n=0,i=t.length;n<i;n++)e=t.charCodeAt(n),e<128?s+=1:e<2048?s+=2:e<55296||e>=57344?s+=3:(n++,s+=4);return s}function Rt(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function pn(t){let e="";for(let s in t)t.hasOwnProperty(s)&&(e.length&&(e+="&"),e+=encodeURIComponent(s)+"="+encodeURIComponent(t[s]));return e}function gn(t){let e={},s=t.split("&");for(let n=0,i=s.length;n<i;n++){let r=s[n].split("=");e[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return e}class yn extends Error{constructor(e,s,n){super(e),this.description=s,this.context=n,this.type="TransportError"}}class Ve extends k{constructor(e){super(),this.writable=!1,ke(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,s,n){return super.emitReserved("error",new yn(e,s,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const s=je(e,this.socket.binaryType);this.onPacket(s)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,s={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(s)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const s=pn(e);return s.length?"?"+s:""}}class mn extends Ve{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const s=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||s()})),this.writable||(n++,this.once("drain",function(){--n||s()}))}else s()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const s=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};nn(e,this.socket.binaryType).forEach(s),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,sn(e,s=>{this.doWrite(s,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",s=this.query||{};return this.opts.timestampRequests!==!1&&(s[this.opts.timestampParam]=Rt()),!this.supportsBinary&&!s.sid&&(s.b64=1),this.createUri(e,s)}}let Nt=!1;try{Nt=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const vn=Nt;function bn(){}class wn extends mn{constructor(e){if(super(e),typeof location<"u"){const s=location.protocol==="https:";let n=location.port;n||(n=s?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,s){const n=this.request({method:"POST",data:e});n.on("success",s),n.on("error",(i,r)=>{this.onError("xhr post error",i,r)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(s,n)=>{this.onError("xhr poll error",s,n)}),this.pollXhr=e}}class q extends k{constructor(e,s,n){super(),this.createRequest=e,ke(this,n),this._opts=n,this._method=n.method||"GET",this._uri=s,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var e;const s=$t(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");s.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(s);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var i;n.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=q.requestsCount++,q.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=bn,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete q.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}q.requestsCount=0;q.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",ot);else if(typeof addEventListener=="function"){const t="onpagehide"in $?"pagehide":"unload";addEventListener(t,ot,!1)}}function ot(){for(let t in q.requests)q.requests.hasOwnProperty(t)&&q.requests[t].abort()}const _n=function(){const t=Dt({xdomain:!1});return t&&t.responseType!==null}();class kn extends wn{constructor(e){super(e);const s=e&&e.forceBase64;this.supportsBinary=_n&&!s}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new q(Dt,this.uri(),e)}}function Dt(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||vn))return new XMLHttpRequest}catch{}if(!e)try{return new $[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Pt=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Cn extends Ve{get name(){return"websocket"}doOpen(){const e=this.uri(),s=this.opts.protocols,n=Pt?{}:$t(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,s,n)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let s=0;s<e.length;s++){const n=e[s],i=s===e.length-1;Fe(n,this.supportsBinary,r=>{try{this.doWrite(n,r)}catch{}i&&_e(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",s=this.query||{};return this.opts.timestampRequests&&(s[this.opts.timestampParam]=Rt()),this.supportsBinary||(s.b64=1),this.createUri(e,s)}}const xe=$.WebSocket||$.MozWebSocket;class Sn extends Cn{createSocket(e,s,n){return Pt?new xe(e,s,n):s?new xe(e,s):new xe(e)}doWrite(e,s){this.ws.send(s)}}class En extends Ve{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const s=on(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(s).getReader(),i=rn();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const r=()=>{n.read().then(({done:a,value:l})=>{a||(this.onPacket(l),r())}).catch(a=>{})};r();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let s=0;s<e.length;s++){const n=e[s],i=s===e.length-1;this._writer.write(n).then(()=>{i&&_e(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const xn={websocket:Sn,webtransport:En,polling:kn},Bn=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,On=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Pe(t){if(t.length>8e3)throw"URI too long";const e=t,s=t.indexOf("["),n=t.indexOf("]");s!=-1&&n!=-1&&(t=t.substring(0,s)+t.substring(s,n).replace(/:/g,";")+t.substring(n,t.length));let i=Bn.exec(t||""),r={},o=14;for(;o--;)r[On[o]]=i[o]||"";return s!=-1&&n!=-1&&(r.source=e,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=An(r,r.path),r.queryKey=Tn(r,r.query),r}function An(t,e){const s=/\/{2,9}/g,n=e.replace(s,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function Tn(t,e){const s={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,i,r){i&&(s[i]=r)}),s}const Le=typeof addEventListener=="function"&&typeof removeEventListener=="function",pe=[];Le&&addEventListener("offline",()=>{pe.forEach(t=>t())},!1);class F extends k{constructor(e,s){if(super(),this.binaryType=ln,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(s=e,e=null),e){const n=Pe(e);s.hostname=n.host,s.secure=n.protocol==="https"||n.protocol==="wss",s.port=n.port,n.query&&(s.query=n.query)}else s.host&&(s.hostname=Pe(s.host).host);ke(this,s),this.secure=s.secure!=null?s.secure:typeof location<"u"&&location.protocol==="https:",s.hostname&&!s.port&&(s.port=this.secure?"443":"80"),this.hostname=s.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=s.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},s.transports.forEach(n=>{const i=n.prototype.name;this.transports.push(i),this._transportsByName[i]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},s),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=gn(this.opts.query)),Le&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},pe.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const s=Object.assign({},this.opts.query);s.EIO=Tt,s.transport=e,this.id&&(s.sid=this.id);const n=Object.assign({},this.opts,{query:s,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&F.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const s=this.createTransport(e);s.open(),this.setTransport(s)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",s=>this._onClose("transport close",s))}onOpen(){this.readyState="open",F.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const s=new Error("server error");s.code=e.data,this._onError(s);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let s=1;for(let n=0;n<this.writeBuffer.length;n++){const i=this.writeBuffer[n].data;if(i&&(s+=dn(i)),n>0&&s>this._maxPayload)return this.writeBuffer.slice(0,n);s+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,_e(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,s,n){return this._sendPacket("message",e,s,n),this}send(e,s,n){return this._sendPacket("message",e,s,n),this}_sendPacket(e,s,n,i){if(typeof s=="function"&&(i=s,s=void 0),typeof n=="function"&&(i=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const r={type:e,data:s,options:n};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},s=()=>{this.off("upgrade",s),this.off("upgradeError",s),e()},n=()=>{this.once("upgrade",s),this.once("upgradeError",s)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(F.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Le&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=pe.indexOf(this._offlineEventListener);n!==-1&&pe.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,s),this.writeBuffer=[],this._prevBufferLen=0}}}F.protocol=Tt;class $n extends F{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let s=this.createTransport(e),n=!1;F.priorWebsocketSuccess=!1;const i=()=>{n||(s.send([{type:"ping",data:"probe"}]),s.once("packet",u=>{if(!n)if(u.type==="pong"&&u.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",s),!s)return;F.priorWebsocketSuccess=s.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(h(),this.setTransport(s),s.send([{type:"upgrade"}]),this.emitReserved("upgrade",s),s=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=s.name,this.emitReserved("upgradeError",f)}}))};function r(){n||(n=!0,h(),s.close(),s=null)}const o=u=>{const f=new Error("probe error: "+u);f.transport=s.name,r(),this.emitReserved("upgradeError",f)};function a(){o("transport closed")}function l(){o("socket closed")}function c(u){s&&u.name!==s.name&&r()}const h=()=>{s.removeListener("open",i),s.removeListener("error",o),s.removeListener("close",a),this.off("close",l),this.off("upgrading",c)};s.once("open",i),s.once("error",o),s.once("close",a),this.once("close",l),this.once("upgrading",c),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{n||s.open()},200):s.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const s=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&s.push(e[n]);return s}}let Rn=class extends $n{constructor(e,s={}){const n=typeof e=="object"?e:s;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(i=>xn[i]).filter(i=>!!i)),super(e,n)}};function Nn(t,e="",s){let n=t;s=s||typeof location<"u"&&location,t==null&&(t=s.protocol+"//"+s.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=s.protocol+t:t=s.host+t),/^(https?|wss?):\/\//.test(t)||(typeof s<"u"?t=s.protocol+"//"+t:t="https://"+t),n=Pe(t)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const r=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+r+":"+n.port+e,n.href=n.protocol+"://"+r+(s&&s.port===n.port?"":":"+n.port),n}const Dn=typeof ArrayBuffer=="function",Pn=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,Lt=Object.prototype.toString,Ln=typeof Blob=="function"||typeof Blob<"u"&&Lt.call(Blob)==="[object BlobConstructor]",qn=typeof File=="function"||typeof File<"u"&&Lt.call(File)==="[object FileConstructor]";function He(t){return Dn&&(t instanceof ArrayBuffer||Pn(t))||Ln&&t instanceof Blob||qn&&t instanceof File}function ge(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let s=0,n=t.length;s<n;s++)if(ge(t[s]))return!0;return!1}if(He(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return ge(t.toJSON(),!0);for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&ge(t[s]))return!0;return!1}function In(t){const e=[],s=t.data,n=t;return n.data=qe(s,e),n.attachments=e.length,{packet:n,buffers:e}}function qe(t,e){if(!t)return t;if(He(t)){const s={_placeholder:!0,num:e.length};return e.push(t),s}else if(Array.isArray(t)){const s=new Array(t.length);for(let n=0;n<t.length;n++)s[n]=qe(t[n],e);return s}else if(typeof t=="object"&&!(t instanceof Date)){const s={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(s[n]=qe(t[n],e));return s}return t}function zn(t,e){return t.data=Ie(t.data,e),delete t.attachments,t}function Ie(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let s=0;s<t.length;s++)t[s]=Ie(t[s],e);else if(typeof t=="object")for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=Ie(t[s],e));return t}const Mn=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Un=5;var p;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(p||(p={}));class Fn{constructor(e){this.replacer=e}encode(e){return(e.type===p.EVENT||e.type===p.ACK)&&ge(e)?this.encodeAsBinary({type:e.type===p.EVENT?p.BINARY_EVENT:p.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let s=""+e.type;return(e.type===p.BINARY_EVENT||e.type===p.BINARY_ACK)&&(s+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(s+=e.nsp+","),e.id!=null&&(s+=e.id),e.data!=null&&(s+=JSON.stringify(e.data,this.replacer)),s}encodeAsBinary(e){const s=In(e),n=this.encodeAsString(s.packet),i=s.buffers;return i.unshift(n),i}}function at(t){return Object.prototype.toString.call(t)==="[object Object]"}class Ke extends k{constructor(e){super(),this.reviver=e}add(e){let s;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");s=this.decodeString(e);const n=s.type===p.BINARY_EVENT;n||s.type===p.BINARY_ACK?(s.type=n?p.EVENT:p.ACK,this.reconstructor=new jn(s),s.attachments===0&&super.emitReserved("decoded",s)):super.emitReserved("decoded",s)}else if(He(e)||e.base64)if(this.reconstructor)s=this.reconstructor.takeBinaryData(e),s&&(this.reconstructor=null,super.emitReserved("decoded",s));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let s=0;const n={type:Number(e.charAt(0))};if(p[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===p.BINARY_EVENT||n.type===p.BINARY_ACK){const r=s+1;for(;e.charAt(++s)!=="-"&&s!=e.length;);const o=e.substring(r,s);if(o!=Number(o)||e.charAt(s)!=="-")throw new Error("Illegal attachments");n.attachments=Number(o)}if(e.charAt(s+1)==="/"){const r=s+1;for(;++s&&!(e.charAt(s)===","||s===e.length););n.nsp=e.substring(r,s)}else n.nsp="/";const i=e.charAt(s+1);if(i!==""&&Number(i)==i){const r=s+1;for(;++s;){const o=e.charAt(s);if(o==null||Number(o)!=o){--s;break}if(s===e.length)break}n.id=Number(e.substring(r,s+1))}if(e.charAt(++s)){const r=this.tryParse(e.substr(s));if(Ke.isPayloadValid(n.type,r))n.data=r;else throw new Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,s){switch(e){case p.CONNECT:return at(s);case p.DISCONNECT:return s===void 0;case p.CONNECT_ERROR:return typeof s=="string"||at(s);case p.EVENT:case p.BINARY_EVENT:return Array.isArray(s)&&(typeof s[0]=="number"||typeof s[0]=="string"&&Mn.indexOf(s[0])===-1);case p.ACK:case p.BINARY_ACK:return Array.isArray(s)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class jn{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const s=zn(this.reconPack,this.buffers);return this.finishedReconstruction(),s}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Vn=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Ke,Encoder:Fn,get PacketType(){return p},protocol:Un},Symbol.toStringTag,{value:"Module"}));function N(t,e,s){return t.on(e,s),function(){t.off(e,s)}}const Hn=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class qt extends k{constructor(e,s,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=s,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[N(e,"open",this.onopen.bind(this)),N(e,"packet",this.onpacket.bind(this)),N(e,"error",this.onerror.bind(this)),N(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...s){var n,i,r;if(Hn.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(s.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(s),this;const o={type:p.EVENT,data:s};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof s[s.length-1]=="function"){const h=this.ids++,u=s.pop();this._registerAckCallback(h,u),o.id=h}const a=(i=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||i===void 0?void 0:i.writable,l=this.connected&&!(!((r=this.io.engine)===null||r===void 0)&&r._hasPingExpired());return this.flags.volatile&&!a||(l?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,s){var n;const i=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(i===void 0){this.acks[e]=s;return}const r=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);s.call(this,new Error("operation has timed out"))},i),o=(...a)=>{this.io.clearTimeoutFn(r),s.apply(this,a)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...s){return new Promise((n,i)=>{const r=(o,a)=>o?i(o):n(a);r.withError=!0,s.push(r),this.emit(e,...s)})}_addToQueue(e){let s;typeof e[e.length-1]=="function"&&(s=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...r)=>n!==this._queue[0]?void 0:(i!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),s&&s(i)):(this._queue.shift(),s&&s(null,...r)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const s=this._queue[0];s.pending&&!e||(s.pending=!0,s.tryCount++,this.flags=s.flags,this.emit.apply(this,s.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:p.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,s){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,s),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(n=>String(n.id)===e)){const n=this.acks[e];delete this.acks[e],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case p.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case p.EVENT:case p.BINARY_EVENT:this.onevent(e);break;case p.ACK:case p.BINARY_ACK:this.onack(e);break;case p.DISCONNECT:this.ondisconnect();break;case p.CONNECT_ERROR:this.destroy();const n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){const s=e.data||[];e.id!=null&&s.push(this.ack(e.id)),this.connected?this.emitEvent(s):this.receiveBuffer.push(Object.freeze(s))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const s=this._anyListeners.slice();for(const n of s)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const s=this;let n=!1;return function(...i){n||(n=!0,s.packet({type:p.ACK,id:e,data:i}))}}onack(e){const s=this.acks[e.id];typeof s=="function"&&(delete this.acks[e.id],s.withError&&e.data.unshift(null),s.apply(this,e.data))}onconnect(e,s){this.id=e,this.recovered=s&&this._pid===s,this._pid=s,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:p.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const s=this._anyListeners;for(let n=0;n<s.length;n++)if(e===s[n])return s.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const s=this._anyOutgoingListeners;for(let n=0;n<s.length;n++)if(e===s[n])return s.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const s=this._anyOutgoingListeners.slice();for(const n of s)n.apply(this,e.data)}}}function te(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}te.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),s=Math.floor(e*this.jitter*t);t=(Math.floor(e*10)&1)==0?t-s:t+s}return Math.min(t,this.max)|0};te.prototype.reset=function(){this.attempts=0};te.prototype.setMin=function(t){this.ms=t};te.prototype.setMax=function(t){this.max=t};te.prototype.setJitter=function(t){this.jitter=t};class ze extends k{constructor(e,s){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(s=e,e=void 0),s=s||{},s.path=s.path||"/socket.io",this.opts=s,ke(this,s),this.reconnection(s.reconnection!==!1),this.reconnectionAttempts(s.reconnectionAttempts||1/0),this.reconnectionDelay(s.reconnectionDelay||1e3),this.reconnectionDelayMax(s.reconnectionDelayMax||5e3),this.randomizationFactor((n=s.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new te({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(s.timeout==null?2e4:s.timeout),this._readyState="closed",this.uri=e;const i=s.parser||Vn;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=s.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var s;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(s=this.backoff)===null||s===void 0||s.setMin(e),this)}randomizationFactor(e){var s;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(s=this.backoff)===null||s===void 0||s.setJitter(e),this)}reconnectionDelayMax(e){var s;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(s=this.backoff)===null||s===void 0||s.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Rn(this.uri,this.opts);const s=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=N(s,"open",function(){n.onopen(),e&&e()}),r=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=N(s,"error",r);if(this._timeout!==!1){const a=this._timeout,l=this.setTimeoutFn(()=>{i(),r(new Error("timeout")),s.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(N(e,"ping",this.onping.bind(this)),N(e,"data",this.ondata.bind(this)),N(e,"error",this.onerror.bind(this)),N(e,"close",this.onclose.bind(this)),N(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(s){this.onclose("parse error",s)}}ondecoded(e){_e(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,s){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new qt(this,e,s),this.nsps[e]=n),n}_destroy(e){const s=Object.keys(this.nsps);for(const n of s)if(this.nsps[n].active)return;this._close()}_packet(e){const s=this.encoder.encode(e);for(let n=0;n<s.length;n++)this.engine.write(s[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,s){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,s),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const s=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},s);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const ie={};function ye(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const s=Nn(t,e.path||"/socket.io"),n=s.source,i=s.id,r=s.path,o=ie[i]&&r in ie[i].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let l;return a?l=new ze(n,e):(ie[i]||(ie[i]=new ze(n,e)),l=ie[i]),s.query&&!e.query&&(e.query=s.queryKey),l.socket(s.path,e)}Object.assign(ye,{Manager:ze,Socket:qt,io:ye,connect:ye});const Kn=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],Wn=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],Jn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",K=[];class Yn{constructor(){V(this,"_data",new J);V(this,"_hash",new J([...Kn]));V(this,"_nDataBytes",0);V(this,"_minBufferSize",0)}finalize(e){e&&this._append(e);const s=this._nDataBytes*8,n=this._data.sigBytes*8;return this._data.words[n>>>5]|=128<<24-n%32,this._data.words[(n+64>>>9<<4)+14]=Math.floor(s/4294967296),this._data.words[(n+64>>>9<<4)+15]=s,this._data.sigBytes=this._data.words.length*4,this._process(),this._hash}_doProcessBlock(e,s){const n=this._hash.words;let i=n[0],r=n[1],o=n[2],a=n[3],l=n[4],c=n[5],h=n[6],u=n[7];for(let f=0;f<64;f++){if(f<16)K[f]=e[s+f]|0;else{const m=K[f-15],j=(m<<25|m>>>7)^(m<<14|m>>>18)^m>>>3,A=K[f-2],We=(A<<15|A>>>17)^(A<<13|A>>>19)^A>>>10;K[f]=j+K[f-7]+We+K[f-16]}const w=l&c^~l&h,S=i&r^i&o^r&o,y=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),v=(l<<26|l>>>6)^(l<<21|l>>>11)^(l<<7|l>>>25),B=u+v+w+Wn[f]+K[f],O=y+S;u=h,h=c,c=l,l=a+B|0,a=o,o=r,r=i,i=B+O|0}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+l|0,n[5]=n[5]+c|0,n[6]=n[6]+h|0,n[7]=n[7]+u|0}_append(e){typeof e=="string"&&(e=J.fromUtf8(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}_process(e){let s,n=this._data.sigBytes/64;e?n=Math.ceil(n):n=Math.max((n|0)-this._minBufferSize,0);const i=n*16,r=Math.min(i*4,this._data.sigBytes);if(i){for(let o=0;o<i;o+=16)this._doProcessBlock(this._data.words,o);s=this._data.words.splice(0,i),this._data.sigBytes-=r}return new J(s,r)}}class J{constructor(e,s){V(this,"words");V(this,"sigBytes");e=this.words=e||[],this.sigBytes=s===void 0?e.length*4:s}static fromUtf8(e){const s=unescape(encodeURIComponent(e)),n=s.length,i=[];for(let r=0;r<n;r++)i[r>>>2]|=(s.charCodeAt(r)&255)<<24-r%4*8;return new J(i,n)}toBase64(){const e=[];for(let s=0;s<this.sigBytes;s+=3){const n=this.words[s>>>2]>>>24-s%4*8&255,i=this.words[s+1>>>2]>>>24-(s+1)%4*8&255,r=this.words[s+2>>>2]>>>24-(s+2)%4*8&255,o=n<<16|i<<8|r;for(let a=0;a<4&&s*8+a*6<this.sigBytes*8;a++)e.push(Jn.charAt(o>>>6*(3-a)&63))}return e.join("")}concat(e){if(this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4),this.sigBytes%4)for(let s=0;s<e.sigBytes;s++){const n=e.words[s>>>2]>>>24-s%4*8&255;this.words[this.sigBytes+s>>>2]|=n<<24-(this.sigBytes+s)%4*8}else for(let s=0;s<e.sigBytes;s+=4)this.words[this.sigBytes+s>>>2]=e.words[s>>>2];this.sigBytes+=e.sigBytes}}function Gn(t){return new Yn().finalize(t).toBase64()}function Xn(t){return Gn(me(t))}function Qn(t,e,s){const[n={},i]=[{},e],r=g(()=>R(t)),o=n.key||Xn([i,typeof r.value=="string"?r.value:"",...Zn(n)]);if(!o||typeof o!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+o);if(!t)throw new Error("[nuxt] [useFetch] request is missing.");const a=o===i?"$f"+o:o;if(!n.baseURL&&typeof r.value=="string"&&r.value[0]==="/"&&r.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:l,lazy:c,default:h,transform:u,pick:f,watch:w,immediate:S,getCachedData:y,deep:v,dedupe:B,...O}=n,m=os({...as,...O,cache:typeof n.cache=="boolean"?void 0:n.cache}),j={server:l,lazy:c,default:h,transform:u,pick:f,immediate:S,getCachedData:y,deep:v,dedupe:B,watch:w===!1?[]:[m,r,...w||[]]};let A;return ps(a,()=>{var Ye;(Ye=A==null?void 0:A.abort)==null||Ye.call(A,new DOMException("Request aborted as another request to the same endpoint was initiated.","AbortError")),A=typeof AbortController<"u"?new AbortController:{};const Je=R(n.timeout);let Ce;return Je&&(Ce=setTimeout(()=>A.abort(new DOMException("Request aborted due to timeout.","AbortError")),Je),A.signal.onabort=()=>clearTimeout(Ce)),(n.$fetch||globalThis.$fetch)(r.value,{signal:A.signal,...m}).finally(()=>{clearTimeout(Ce)})},j)}function Zn(t){var s;const e=[((s=R(t.method))==null?void 0:s.toUpperCase())||"GET",R(t.baseURL)];for(const n of[t.params||t.query]){const i=R(n);if(!i)continue;const r={};for(const[o,a]of Object.entries(i))r[R(o)]=R(a);e.push(r)}return e}const ei={name:"App",components:{Sidebar:kt,ChatList:Ct,ChatWindow:St},data(){return{chats:[{id:1,name:"Anton",messages:[]},{id:2,name:"Zack",messages:[]}],messages:[],selectedChat:null,username:"",connect:!1}},methods:{setSelectedChat(t){this.selectedChat=t,this.loadMessages()},async loadMessages(){let{data:t}=await Qn(`/api/messages/${this.username}?sender=${this.selectedChat.name}`,"$RcJmAH4yb5");this.selectedChat.messages=t},handleConnect(){if(this.username.length>0){const t=_t();this.connect=!0,this.socket=ye("ws://localhost:3000"),this.socket.emit("logged_in",{username:this.username}),this.socket.on("chat message",e=>{this.chats.find(s=>s.name===e.sender).messages.push({text:e.text,sender:e.sender,receiver:e.receiver}),t.add({title:this.username,description:e.text})})}},sendMessage(t){this.socket.emit("chat message",{sender:this.username,text:t.text,receiver:this.selectedChat.name})}}},ti={class:"app"},si={key:0,class:"login-container"},ni={key:2,class:"content"};function ii(t,e,s,n,i,r){const o=Ms,a=gt,l=kt,c=Ct,h=St;return d(),b("div",ti,[de(o),i.connect?C("",!0):(d(),b("div",si,[e[3]||(e[3]=_("h1",null,"Entering into messager",-1)),_("form",{onSubmit:e[1]||(e[1]=he((...u)=>r.handleConnect&&r.handleConnect(...u),["prevent"]))},[ft(_("input",{type:"text",class:"form-control",placeholder:"Enter Username","onUpdate:modelValue":e[0]||(e[0]=u=>i.username=u)},null,512),[[pt,i.username]]),de(a,{to:""},{default:X(()=>e[2]||(e[2]=[_("button",{class:"btn btn-primary"},"Enter to chat",-1)])),_:1})],32)])),i.connect?(d(),x(l,{key:1})):C("",!0),i.connect?(d(),b("div",ni,[de(c,{chats:i.chats,onChatSelected:r.setSelectedChat},null,8,["chats","onChatSelected"]),i.selectedChat?(d(),x(h,{key:0,chat:i.selectedChat,onSendMessage:r.sendMessage},null,8,["chat","onSendMessage"])):C("",!0)])):C("",!0)])}const hi=z(ei,[["render",ii],["__scopeId","data-v-aa36159b"]]);export{hi as default};
